---
import STACK, { TechName, Stage } from "@data/techStack";
import { Sprite } from "astro-iconify";

interface Props {
  name: TechName;
}

const STAGES = {
  researching: "ğŸ¤”",
  exploring: "ğŸ‘‰",
  learning: "âœ¨",
  confident: "â­ï¸",
  expert: "ğŸ’«",
} as Record<Stage, string>;

const { name } = Astro.props;

const tech = STACK[name];

const { icon, stage, isInterested, isWork, isFresh } = tech;

const iconName = typeof icon === "string" ? icon : icon.name;

const iconColor = typeof icon === "object" && icon.color;

const icons = [
  STAGES[stage],
  isInterested && "â¤ï¸",
  isWork && "ğŸ’¼",
  isFresh && "ğŸŒ¿",
]
  .filter(Boolean)
  .join("");
---

<div
  title={name}
  class="select-none rounded-md border bg-cc-night text-cc-white"
>
  <h3 class="sr-only">{name}</h3>
  <Sprite
    name={iconName}
    class="mx-auto mb-1 mt-2 aspect-square w-12"
    style={{ color: iconColor }}
  />
  <span class="block w-[10ch] p-1 text-center text-sm md:tracking-widest">
    {icons}
  </span>
</div>
